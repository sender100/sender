<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>File Share App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
      text-align: center;
      padding: 30px;
      color: #333;
    }
    .box {
      background: white;
      padding: 20px;
      margin: 20px auto;
      width: 350px;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }
    input, button {
      margin: 10px 0;
      padding: 10px;
      width: 90%;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #4CAF50;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background: #45a049;
    }
    .file-list {
      margin-top: 15px;
      text-align: left;
    }
    a {
      color: #2196F3;
      text-decoration: none;
    }
  </style>
</head>
<body>

  <h1>üìÇ File Sender & Receiver</h1>

  <!-- Sender Section -->
  <div class="box">
    <h2>Sender</h2>
    <input type="text" id="senderId" placeholder="Enter Receiver ID"><br>
    <input type="file" id="fileInput"><br>
    <button onclick="sendFile()">Send File</button>
    <p id="sendStatus"></p>
  </div>

  <!-- Receiver Section -->
  <div class="box">
    <h2>Receiver</h2>
    <input type="text" id="receiverId" placeholder="Enter Receiver ID"><br>
    <button onclick="receiveFiles()">Login</button>
    <div id="fileList" class="file-list"></div>
  </div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>

  <script>
    // ‚úÖ Replace this with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID",
      databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const db = firebase.database();

    // Send File
    function sendFile() {
      const receiverId = document.getElementById('senderId').value.trim();
      const fileInput = document.getElementById('fileInput');
      const status = document.getElementById('sendStatus');

      if (!receiverId || fileInput.files.length === 0) {
        status.innerText = "‚ö†Ô∏è Enter ID and choose file.";
        return;
      }

      const file = fileInput.files[0];
      const storageRef = storage.ref(receiverId + "/" + Date.now() + "-" + file.name);

      storageRef.put(file).then(snapshot => {
        snapshot.ref.getDownloadURL().then(url => {
          db.ref("files/" + receiverId).push({
            name: file.name,
            url: url
          });
          status.innerText = "‚úÖ File uploaded for Receiver ID: " + receiverId;
          fileInput.value = "";
        });
      });
    }

    // Receive Files
    function receiveFiles() {
      const receiverId = document.getElementById('receiverId').value.trim();
      const fileList = document.getElementById('fileList');
      fileList.innerHTML = "";

      if (!receiverId) {
        fileList.innerHTML = "<p>‚ö†Ô∏è Enter Receiver ID.</p>";
        return;
      }

      db.ref("files/" + receiverId).once("value", snapshot => {
        if (!snapshot.exists()) {
          fileList.innerHTML = "<p>No files found for this ID.</p>";
          return;
        }

        snapshot.forEach(child => {
          const file = child.val();
          const link = document.createElement("a");
          link.href = file.url;
          link.download = file.name;
          link.innerText = "‚¨áÔ∏è Download " + file.name;
          fileList.appendChild(link);
          fileList.appendChild(document.createElement("br"));
        });
      });
    }
  </script>
</body>
</html>
